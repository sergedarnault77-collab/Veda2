/* ── Veda 2.0 — Global Reset & Base Styles ── */

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  border-color: var(--border);
}

:root {
  /* responsive layout */
  --content-max: 480px;
  --sidebar-width: 0px;
  --nav-height: 72px;
}

html, body { height: 100%; }

html {
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  background:
    radial-gradient(900px 520px at 18% 10%, rgba(96, 165, 250, 0.18), transparent 60%),
    radial-gradient(820px 520px at 82% 12%, rgba(99, 102, 241, 0.14), transparent 60%),
    linear-gradient(180deg, var(--veda-bg) 0%, var(--veda-bg) 52%, var(--veda-surface-solid) 100%);
  background-attachment: fixed;
  color: var(--veda-text);
  font-family: var(--font-sans);
  font-size: 16.5px;
  line-height: 1.6;
  min-height: 100dvh;
}

h1, h2, h3 { letter-spacing: -0.02em; }

/* ── Phone (default): single column, bottom nav ── */
#root {
  max-width: var(--content-max);
  margin: 0 auto;
  padding: 16px 16px calc(var(--nav-height) + 24px);
}

button {
  font-family: inherit;
  cursor: pointer;
}

/* Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--alpha-medium); border-radius: 3px; }

/* ── Tablet (600–1024px) ── */
@media (min-width: 600px) {
  :root {
    --content-max: 700px;
  }
  #root {
    padding: 24px 24px calc(var(--nav-height) + 28px);
  }
}

/* ── Desktop / laptop (1024px+): sidebar layout ── */
@media (min-width: 1024px) {
  :root {
    --content-max: 860px;
    --sidebar-width: 240px;
  }
  #root {
    max-width: calc(var(--content-max));
    margin-left: calc(var(--sidebar-width) + 40px);
    margin-right: auto;
    padding: 32px 32px 48px;
  }
}

@media (min-width: 1400px) {
  :root {
    --content-max: 960px;
  }
  #root {
    margin-left: calc(var(--sidebar-width) + 60px);
  }
}

/* ── Global component surfaces ── */

/* Cards, sections, panels */
.scan-status,
.exposure,
.coverage,
.stack-signal,
.signal-explainer,
.explaining-signals,
.context-panel,
.supp-card,
.med-card,
.dashboard__section,
.interaction-warnings {
  background: var(--veda-surface);
  border-color: var(--veda-border);
}

/* Tiles and secondary surfaces */
.scan-status__tile {
  border-color: var(--veda-border);
  background: var(--alpha-faint);
}

.scan-status__tile:hover {
  background: rgba(37, 99, 235, 0.05);
  border-color: var(--veda-border-accent);
}

.scan-status__tile--primary {
  background: linear-gradient(135deg, rgba(37, 99, 235, 0.08), rgba(37, 99, 235, 0.03));
  border-color: var(--veda-border-accent);
  box-shadow: 0 0 12px rgba(37, 99, 235, 0.06);
}

.scan-status__tile--primary:hover {
  background: linear-gradient(135deg, rgba(37, 99, 235, 0.12), rgba(37, 99, 235, 0.05));
  box-shadow: 0 0 18px rgba(37, 99, 235, 0.10);
}

/* Buttons — secondary / outline */
.scan-status__dismissBtn,
.scan-status__frontOnly {
  background: var(--alpha-faint);
  border-color: var(--alpha-medium);
  color: var(--veda-text-muted);
}

.scan-status__dismissBtn:hover,
.scan-status__frontOnly:hover {
  background: var(--alpha-subtle);
}

/* Caffeine follow-up */
.scan-status__caffeineQ {
  background: rgba(37, 99, 235, 0.04);
  border-color: rgba(37, 99, 235, 0.12);
}

.scan-status__caffeineQBtn--decaf {
  background: var(--alpha-subtle);
  border-color: var(--alpha-medium);
  color: var(--veda-text-muted);
}

/* History divider */
.scan-status__history {
  border-top-color: var(--veda-border);
}

/* Drink builder */
.drink-builder {
  background: var(--veda-surface);
  border-color: var(--veda-border);
}

.drink-chip {
  border-color: var(--veda-border);
  background: var(--alpha-faint);
}

.drink-chip--selected {
  border-color: var(--veda-border-accent);
  background: rgba(37, 99, 235, 0.06);
}

/* Modals and sheets */
.add-scanned-modal__content,
.buy-sheet {
  background: rgba(255, 255, 255, 0.96);
  border-color: var(--veda-border);
}

.add-scanned-modal__backdrop,
.buy-backdrop {
  background: rgba(0, 0, 0, 0.3);
}

.buy-sheet__row {
  border-color: var(--veda-border-soft);
}

/* Dashboard chips and cards */
.day__chip {
  background: var(--alpha-subtle);
  border-color: var(--veda-border);
}

.overlap__card {
  background: var(--alpha-faint);
  border-color: var(--veda-border-soft);
}

.timing__dot--morning { background: #E8920A; }
.timing__dot--midday { background: #2088D0; }
.timing__dot--evening { background: var(--veda-accent); }

/* Auth screens */
.auth-card,
.profile-card,
.plans-card {
  background: rgba(255, 255, 255, 0.85);
  border-color: var(--veda-border);
}

.auth-card input,
.profile-card select,
.scan-status__urlInput {
  background: var(--alpha-faint);
  border-color: var(--alpha-medium);
  color: var(--veda-text);
}

/* Loading banner */
.loading-banner {
  background: var(--veda-surface);
  border-color: var(--veda-border);
}

/* Coverage bars / exposure bars */
.exposure__bar-track,
.coverage__bar-bg {
  background: var(--alpha-soft);
}

/* Stack signal states */
.stack-signal__badge--balanced {
  background: rgba(37, 99, 235, 0.08);
}

.stack-signal__badge--redundant {
  background: rgba(245, 158, 11, 0.10);
}

.stack-signal__badge--excessive {
  background: rgba(220, 38, 38, 0.08);
}

/* Supplement & Medication cards */
.supp-card:hover,
.med-card:hover {
  border-color: var(--alpha-medium);
}

.supp-nutrients,
.med-nutrients {
  background: rgba(37, 99, 235, 0.04);
  border-color: rgba(37, 99, 235, 0.10);
}

.supp-nutrients__row,
.med-nutrients__row {
  background: rgba(37, 99, 235, 0.06);
  border-color: rgba(37, 99, 235, 0.10);
  color: var(--veda-text);
}

.supp-nutrients__name,
.med-nutrients__name,
.supp-nutrients__amt,
.med-nutrients__amt,
.supp-nutrients__pct,
.med-nutrients__pct {
  color: var(--veda-text);
  opacity: 1;
}

.supp-nutrients__hdr,
.med-nutrients__hdr {
  color: var(--veda-text);
}

.supp-nutrients__sub,
.med-nutrients__sub {
  color: var(--veda-text-muted);
}

.item-ingredients__chip {
  background: rgba(37, 99, 235, 0.05);
  border-color: rgba(37, 99, 235, 0.12);
  color: var(--veda-text);
}

.item-insights {
  background: rgba(37, 99, 235, 0.03);
  border-color: rgba(37, 99, 235, 0.10);
}

.item-insights__title,
.item-insights__summary,
.item-insights__what,
.item-insights__note {
  color: var(--veda-text);
  opacity: 1;
}

/* Interaction warning cards */
.interaction-warnings__card {
  border-color: var(--veda-border);
}

.ix-warnings--loading {
  background: var(--alpha-faint);
  color: var(--veda-text-muted);
}

.ix-warnings__spinner {
  border-color: var(--alpha-medium);
  border-top-color: var(--veda-accent);
}

.ix-card--info {
  background: rgba(37, 99, 235, 0.04);
  border-left-color: rgba(37, 99, 235, 0.2);
}

.ix-card--warning {
  background: rgba(220, 38, 38, 0.05);
}

.ix-card--caution {
  background: rgba(245, 158, 11, 0.05);
}

.ix-card__headline {
  color: var(--veda-text);
}

.ix-card__detail {
  color: var(--veda-text-muted);
}

.ix-card__chip {
  background: var(--alpha-subtle);
  color: var(--veda-text-muted);
}

/* Exposure chart (dashboard) */
.expo-range-toggle {
  background: var(--alpha-subtle);
}

.expo-range-toggle__btn {
  color: var(--veda-text-muted);
}

.expo-range-toggle__btn--active {
  background: rgba(37, 99, 235, 0.10);
  color: var(--veda-accent);
}

.sweetener-list {
  border-top-color: var(--veda-border-soft);
}

.sweetener-list__chip {
  background: rgba(245, 158, 11, 0.08);
  border-color: rgba(245, 158, 11, 0.18);
  color: #B45309;
}

/* ── Page canvas (main content area) ── */
.veda-canvas {
  background: transparent;
}

/* ── Sidebar / nav ── */
.veda-sidebar {
  background: var(--nav-bg);
  border-right: 1px solid var(--nav-border);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

/* ── Cards ── */
.veda-card {
  background: var(--veda-surface);
  border: 1px solid var(--veda-border);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}
.veda-card--flat {
  background: var(--veda-surface-solid);
  border: 1px solid var(--veda-border);
  border-radius: var(--radius-xl);
}
.veda-card-muted {
  background: var(--veda-surface-soft);
  border: 1px solid var(--veda-border);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

/* ── Hero panel (premium glow behind top section) ── */
.veda-hero {
  position: relative;
  overflow: hidden;
}
.veda-hero::before {
  content: "";
  position: absolute;
  inset: -1px;
  background:
    radial-gradient(700px 220px at 35% 0%, rgba(37, 99, 235, 0.14), transparent 60%),
    radial-gradient(700px 220px at 70% 10%, rgba(99, 102, 241, 0.10), transparent 65%);
  pointer-events: none;
}
.veda-hero > * { position: relative; z-index: 1; }

/* ── Pills / tabs ── */
.veda-pill {
  background: rgba(255, 255, 255, 0.50);
  border: 1px solid var(--veda-border);
  color: var(--veda-text-muted);
  border-radius: 999px;
  padding: 7px 12px;
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.25) inset;
}
[data-theme="dark"] .veda-pill {
  background: rgba(16, 28, 58, 0.50);
}
.veda-pill--active {
  background: linear-gradient(135deg, rgba(37, 99, 235, 0.20), rgba(99, 102, 241, 0.14));
  border-color: rgba(96, 165, 250, 0.35);
  color: var(--veda-text);
}

/* ── Buttons ── */
.veda-btn-primary {
  background: linear-gradient(135deg, var(--brand) 0%, var(--brand-2) 55%, #2457D8 100%);
  color: #fff;
  border: 1px solid rgba(255, 255, 255, 0.18);
  border-radius: var(--radius-md);
  box-shadow: 0 10px 24px rgba(37, 99, 235, 0.28);
  transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
}
.veda-btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 14px 30px rgba(37, 99, 235, 0.36);
  filter: brightness(1.02);
}
.veda-btn-primary:active {
  transform: translateY(0px);
  box-shadow: 0 10px 24px rgba(37, 99, 235, 0.22);
}
.veda-btn-secondary {
  background: rgba(255, 255, 255, 0.55);
  border: 1px solid var(--veda-border);
  color: var(--veda-text-muted);
  border-radius: var(--radius-md);
  transition: filter .12s ease;
}
[data-theme="dark"] .veda-btn-secondary {
  background: rgba(16, 28, 58, 0.52);
}
.veda-btn-secondary:hover {
  filter: brightness(0.98);
}

/* ── Chips ── */
.veda-chip {
  background: var(--chip);
  border: 1px solid var(--chip-border);
  color: var(--chip-text);
  border-radius: 999px;
}

/* ── Status banners ── */
.veda-banner {
  border-radius: var(--radius-xl);
  border: 1px solid var(--veda-border);
  background: linear-gradient(135deg, rgba(37, 99, 235, 0.08), rgba(255, 255, 255, 0.62));
  box-shadow: var(--shadow-md);
}
[data-theme="dark"] .veda-banner {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(16, 28, 58, 0.55));
}
.veda-banner--outline {
  border-color: rgba(245, 158, 11, 0.55);
  box-shadow: 0 0 0 1px rgba(245, 158, 11, 0.18) inset, var(--shadow-md);
}

.veda-status-ok {
  background: linear-gradient(135deg, var(--veda-balance-soft), #E6FFFA);
  border: 1px solid var(--veda-balance-border);
  color: #065F46;
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
}
.veda-status-warn {
  background: linear-gradient(135deg, var(--veda-caution-soft), #FFF7ED);
  border: 1px solid var(--veda-caution-border);
  color: #92400E;
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
}
.veda-status-danger {
  background: linear-gradient(135deg, var(--veda-issue-soft), #FFF1F2);
  border: 1px solid var(--veda-issue-border);
  color: #991B1B;
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
}

/* ── AI panel styling ── */
.veda-ai-panel {
  background: linear-gradient(135deg, var(--veda-ai-soft), #F8FAFF);
  border: 1px solid var(--veda-ai-border);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
}

/* ── Inputs ── */
.veda-input {
  background: rgba(255, 255, 255, 0.72);
  border: 1px solid var(--veda-border);
  border-radius: var(--radius-sm);
  color: var(--veda-text);
  outline: none;
}
[data-theme="dark"] .veda-input {
  background: rgba(16, 28, 58, 0.58);
}
.veda-input:focus {
  border-color: rgba(96, 165, 250, 0.40);
  box-shadow: var(--focus-ring);
}

/* ── Muted text helper ── */
.veda-muted { color: var(--veda-text-subtle); }

/* ── Links ── */
a { color: var(--brand); }
a:hover { color: var(--brand-2); }

/* ── Dark mode component overrides ── */

[data-theme="dark"] .add-scanned-modal__content,
[data-theme="dark"] .buy-sheet {
  background: rgba(15, 33, 74, 0.96);
}

[data-theme="dark"] .add-scanned-modal__backdrop,
[data-theme="dark"] .buy-backdrop {
  background: rgba(0, 0, 0, 0.55);
}

[data-theme="dark"] .auth-card,
[data-theme="dark"] .profile-card,
[data-theme="dark"] .plans-card {
  background: rgba(16, 28, 58, 0.80);
}

[data-theme="dark"] .sweetener-list__chip {
  background: rgba(251, 191, 36, 0.12);
  border-color: rgba(251, 191, 36, 0.25);
  color: #FCD34D;
}

[data-theme="dark"] .timing__dot--morning { background: #FBBF24; }
[data-theme="dark"] .timing__dot--midday { background: #93C5FD; }
[data-theme="dark"] .timing__dot--evening { background: #60A5FA; }
