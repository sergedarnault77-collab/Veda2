/* ── Veda 2.0 — Global Reset & Tokens ── */

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  /* palette — dutch royal blue & orange */
  --veda-bg: #0A0E1C;
  --veda-bg-gradient: linear-gradient(145deg, #0A0E1C 0%, #10172D 50%, #0C1024 100%);
  --veda-surface: rgba(16, 23, 45, 0.7);
  --veda-surface-solid: #10172D;
  --veda-surface-hover: #141D3A;
  --veda-border: rgba(255, 255, 255, 0.07);
  --veda-border-accent: rgba(46, 91, 255, 0.25);
  --veda-text: #E8EBF2;
  --veda-text-muted: #9AA4BF;
  --veda-accent: #2E5BFF;
  --veda-accent-light: #5a80ff;
  --veda-accent-glow: rgba(46, 91, 255, 0.2);
  --veda-royal-deep: #1F3A5F;

  /* status colors — no green; OK states use orange */
  --veda-red: #f06292;
  --veda-orange: #FF8C1A;
  --veda-orange-soft: #FFB35C;
  --veda-green: var(--veda-orange);
  --veda-magenta: #e056a0;

  /* exposure bar fills */
  --bar-sugar: #FF8C1A;
  --bar-sweetener: #ab47bc;
  --bar-calorie: #2E5BFF;
  --bar-caffeine: #26c6da;

  /* typography */
  --font-sans: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  --font-mono: "JetBrains Mono", "Fira Code", monospace;

  /* drink builder */
  --db-chip-bg: rgba(255, 255, 255, 0.05);
  --db-chip-hover-bg: rgba(255, 255, 255, 0.1);
  --db-estimate-bg: rgba(0, 0, 0, 0.2);

  /* radii */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 20px;
  --radius-xl: 24px;

  /* responsive layout */
  --content-max: 480px;
  --sidebar-width: 0px;
  --nav-height: 72px;
}

/* ── Light mode overrides ── */
[data-theme="light"] {
  --veda-bg: #f4f4f8;
  --veda-bg-gradient: linear-gradient(145deg, #f4f4f8 0%, #ecedf3 50%, #f0f0f6 100%);
  --veda-surface: rgba(255, 255, 255, 0.75);
  --veda-surface-solid: #ffffff;
  --veda-surface-hover: #f0effa;
  --veda-border: rgba(0, 0, 0, 0.08);
  --veda-border-accent: rgba(31, 58, 95, 0.2);
  --veda-text: #1a1a2e;
  --veda-text-muted: #6b6b8a;
  --veda-accent: #2E5BFF;
  --veda-accent-light: #5a80ff;
  --veda-accent-glow: rgba(46, 91, 255, 0.15);

  --veda-red: #d84374;
  --veda-orange: #e8920a;
  --veda-orange-soft: #d4940a;
  --veda-green: var(--veda-orange);
  --veda-magenta: #c0408a;

  --bar-sugar: #f09000;
  --bar-sweetener: #9030a0;
  --bar-calorie: #2088d0;
  --bar-caffeine: #1aa8b8;

  --db-chip-bg: rgba(0, 0, 0, 0.04);
  --db-chip-hover-bg: rgba(0, 0, 0, 0.08);
  --db-estimate-bg: rgba(0, 0, 0, 0.04);
}

html {
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: var(--font-sans);
  background: var(--veda-bg);
  background-image: var(--veda-bg-gradient);
  background-attachment: fixed;
  color: var(--veda-text);
  line-height: 1.6;
  min-height: 100dvh;
}

/* ── Phone (default): single column, bottom nav ── */
#root {
  max-width: var(--content-max);
  margin: 0 auto;
  padding: 16px 16px calc(var(--nav-height) + 24px);
}

button {
  font-family: inherit;
  cursor: pointer;
}

/* Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.08); border-radius: 3px; }

/* ── Tablet (600–1024px) ── */
@media (min-width: 600px) {
  :root {
    --content-max: 700px;
  }
  #root {
    padding: 24px 24px calc(var(--nav-height) + 28px);
  }
}

/* ── Desktop / laptop (1024px+): sidebar layout ── */
@media (min-width: 1024px) {
  :root {
    --content-max: 860px;
    --sidebar-width: 240px;
  }
  #root {
    max-width: calc(var(--content-max));
    margin-left: calc(var(--sidebar-width) + 40px);
    margin-right: auto;
    padding: 32px 32px 48px;
  }
}

@media (min-width: 1400px) {
  :root {
    --content-max: 960px;
  }
  #root {
    margin-left: calc(var(--sidebar-width) + 60px);
  }
}

/* ── Light mode: global component overrides ── */

[data-theme="light"] ::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.12);
}

/* Cards, sections, panels — glass surfaces */
[data-theme="light"] .scan-status,
[data-theme="light"] .exposure,
[data-theme="light"] .coverage,
[data-theme="light"] .stack-signal,
[data-theme="light"] .signal-explainer,
[data-theme="light"] .explaining-signals,
[data-theme="light"] .context-panel,
[data-theme="light"] .supp-card,
[data-theme="light"] .med-card,
[data-theme="light"] .dashboard__section,
[data-theme="light"] .interaction-warnings {
  background: rgba(255, 255, 255, 0.7);
  border-color: rgba(0, 0, 0, 0.08);
}

/* Tiles and secondary surfaces */
[data-theme="light"] .scan-status__tile {
  border-color: rgba(0, 0, 0, 0.08);
  background: rgba(0, 0, 0, 0.02);
}

[data-theme="light"] .scan-status__tile:hover {
  background: rgba(31, 58, 95, 0.06);
  border-color: rgba(31, 58, 95, 0.2);
}

[data-theme="light"] .scan-status__tile--primary {
  background: linear-gradient(135deg, rgba(31, 58, 95, 0.1), rgba(31, 58, 95, 0.04));
  border-color: rgba(31, 58, 95, 0.25);
  box-shadow: 0 0 12px rgba(46, 91, 255, 0.08);
}

[data-theme="light"] .scan-status__tile--primary:hover {
  background: linear-gradient(135deg, rgba(31, 58, 95, 0.16), rgba(31, 58, 95, 0.06));
  box-shadow: 0 0 18px rgba(46, 91, 255, 0.12);
}

/* Buttons — secondary / outline */
[data-theme="light"] .scan-status__dismissBtn,
[data-theme="light"] .scan-status__frontOnly {
  background: rgba(0, 0, 0, 0.03);
  border-color: rgba(0, 0, 0, 0.1);
  color: var(--veda-text-muted);
}

[data-theme="light"] .scan-status__dismissBtn:hover,
[data-theme="light"] .scan-status__frontOnly:hover {
  background: rgba(0, 0, 0, 0.06);
}

/* Caffeine follow-up */
[data-theme="light"] .scan-status__caffeineQ {
  background: rgba(31, 58, 95, 0.05);
  border-color: rgba(31, 58, 95, 0.15);
}

[data-theme="light"] .scan-status__caffeineQBtn--decaf {
  background: rgba(0, 0, 0, 0.04);
  border-color: rgba(0, 0, 0, 0.1);
  color: var(--veda-text-muted);
}

/* History divider */
[data-theme="light"] .scan-status__history {
  border-top-color: rgba(0, 0, 0, 0.08);
}

/* Drink builder */
[data-theme="light"] .drink-builder {
  background: rgba(255, 255, 255, 0.7);
  border-color: rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .drink-chip {
  border-color: rgba(0, 0, 0, 0.08);
  background: rgba(0, 0, 0, 0.02);
}

[data-theme="light"] .drink-chip--selected {
  border-color: rgba(31, 58, 95, 0.3);
  background: rgba(31, 58, 95, 0.08);
}

/* Modals and sheets */
[data-theme="light"] .add-scanned-modal__content,
[data-theme="light"] .buy-sheet {
  background: rgba(255, 255, 255, 0.96);
  border-color: rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .add-scanned-modal__backdrop,
[data-theme="light"] .buy-backdrop {
  background: rgba(0, 0, 0, 0.3);
}

[data-theme="light"] .buy-sheet__row {
  border-color: rgba(0, 0, 0, 0.06);
}

/* Dashboard chips and cards */
[data-theme="light"] .day__chip {
  background: rgba(0, 0, 0, 0.04);
  border-color: rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .overlap__card {
  background: rgba(0, 0, 0, 0.03);
  border-color: rgba(0, 0, 0, 0.06);
}

[data-theme="light"] .timing__dot--morning { background: #e8920a; }
[data-theme="light"] .timing__dot--midday { background: #2088d0; }
[data-theme="light"] .timing__dot--evening { background: #2E5BFF; }

/* Auth screens */
[data-theme="light"] .auth-card,
[data-theme="light"] .profile-card,
[data-theme="light"] .plans-card {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .auth-card input,
[data-theme="light"] .profile-card select,
[data-theme="light"] .scan-status__urlInput {
  background: rgba(0, 0, 0, 0.03);
  border-color: rgba(0, 0, 0, 0.12);
  color: var(--veda-text);
}

/* Loading banner */
[data-theme="light"] .loading-banner {
  background: rgba(255, 255, 255, 0.7);
  border-color: rgba(0, 0, 0, 0.08);
}

/* Coverage bars / exposure bars */
[data-theme="light"] .exposure__bar-track,
[data-theme="light"] .coverage__bar-bg {
  background: rgba(0, 0, 0, 0.06);
}

/* Stack signal states */
[data-theme="light"] .stack-signal__badge--balanced {
  background: rgba(46, 91, 255, 0.08);
}

[data-theme="light"] .stack-signal__badge--redundant {
  background: rgba(232, 146, 10, 0.1);
}

[data-theme="light"] .stack-signal__badge--excessive {
  background: rgba(216, 67, 116, 0.1);
}

/* ── Supplement & Medication cards: nutrient rows, ingredients, insights ── */

[data-theme="light"] .supp-card:hover,
[data-theme="light"] .med-card:hover {
  border-color: rgba(0, 0, 0, 0.12);
}

[data-theme="light"] .supp-nutrients,
[data-theme="light"] .med-nutrients {
  background: rgba(31, 58, 95, 0.05);
  border-color: rgba(31, 58, 95, 0.12);
}

[data-theme="light"] .supp-nutrients__row,
[data-theme="light"] .med-nutrients__row {
  background: rgba(31, 58, 95, 0.08);
  border-color: rgba(31, 58, 95, 0.12);
  color: var(--veda-text);
}

[data-theme="light"] .supp-nutrients__name,
[data-theme="light"] .med-nutrients__name,
[data-theme="light"] .supp-nutrients__amt,
[data-theme="light"] .med-nutrients__amt,
[data-theme="light"] .supp-nutrients__pct,
[data-theme="light"] .med-nutrients__pct {
  color: var(--veda-text);
  opacity: 1;
}

[data-theme="light"] .supp-nutrients__hdr,
[data-theme="light"] .med-nutrients__hdr {
  color: var(--veda-text);
}

[data-theme="light"] .supp-nutrients__sub,
[data-theme="light"] .med-nutrients__sub {
  color: var(--veda-text-muted);
}

[data-theme="light"] .item-ingredients__chip {
  background: rgba(31, 58, 95, 0.06);
  border-color: rgba(31, 58, 95, 0.14);
  color: var(--veda-text);
}

[data-theme="light"] .item-insights {
  background: rgba(31, 58, 95, 0.04);
  border-color: rgba(31, 58, 95, 0.12);
}

[data-theme="light"] .item-insights__title,
[data-theme="light"] .item-insights__summary,
[data-theme="light"] .item-insights__what,
[data-theme="light"] .item-insights__note {
  color: var(--veda-text);
  opacity: 1;
}

/* Interaction warning cards in light mode */
[data-theme="light"] .interaction-warnings__card {
  border-color: rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .ix-warnings--loading {
  background: rgba(0, 0, 0, 0.03);
  color: var(--veda-text-muted);
}

[data-theme="light"] .ix-warnings__spinner {
  border-color: rgba(0, 0, 0, 0.1);
  border-top-color: var(--veda-accent);
}

[data-theme="light"] .ix-card--info {
  background: rgba(31, 58, 95, 0.04);
  border-left-color: rgba(31, 58, 95, 0.2);
}

[data-theme="light"] .ix-card--warning {
  background: rgba(231, 76, 60, 0.06);
}

[data-theme="light"] .ix-card--caution {
  background: rgba(230, 126, 34, 0.06);
}

[data-theme="light"] .ix-card__headline {
  color: var(--veda-text);
}

[data-theme="light"] .ix-card__detail {
  color: var(--veda-text-muted);
}

[data-theme="light"] .ix-card__chip {
  background: rgba(0, 0, 0, 0.05);
  color: var(--veda-text-muted);
}

/* Exposure chart (dashboard) in light mode */
[data-theme="light"] .expo-range-toggle {
  background: rgba(0, 0, 0, 0.04);
}

[data-theme="light"] .expo-range-toggle__btn {
  color: var(--veda-text-muted);
}

[data-theme="light"] .expo-range-toggle__btn--active {
  background: rgba(46, 91, 255, 0.12);
  color: var(--veda-accent);
}

[data-theme="light"] .sweetener-list {
  border-top-color: rgba(0, 0, 0, 0.06);
}

[data-theme="light"] .sweetener-list__chip {
  background: rgba(245, 158, 11, 0.08);
  border-color: rgba(245, 158, 11, 0.18);
  color: #b45309;
}
