<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

    <!-- App identity -->
    <title>Veda</title>
    <meta name="description" content="Track supplements, medications, and daily exposure. Scan labels, log drinks, and get AI-powered insights." />
    <meta name="theme-color" content="#6c5ce7" />

    <!-- PWA manifest -->
    <link rel="manifest" href="/manifest.webmanifest" />

    <!-- Favicons -->
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <link rel="icon" href="/favicon.png" type="image/png" sizes="32x32" />

    <!-- iOS -->
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Veda" />

    <!-- Android / Chrome -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="Veda" />
  </head>
  <body>
    <div id="root">
      <div id="app-loading" style="display:flex;align-items:center;justify-content:center;min-height:100vh;background:#0a0a1a;color:#fff;font-family:system-ui">
        <div style="text-align:center">
          <h1 style="font-size:24px;font-weight:700;color:#6c5ce7;margin:0 0 8px">Veda</h1>
          <p style="font-size:13px;opacity:0.5;margin:0">Track supplements, medications &amp; daily exposure</p>
        </div>
      </div>
    </div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      window.addEventListener('error', function(e) {
        var root = document.getElementById('root');
        if (root && (!root.children.length || root.children.length === 1 && root.querySelector('#app-loading'))) {
          root.innerHTML = '<div style="padding:40px;font-family:system-ui;color:#fff;background:#0a0a1a;min-height:100vh">' +
            '<h1 style="font-size:20px;color:#6c5ce7">Veda</h1>' +
            '<p style="opacity:0.7;font-size:14px;margin:12px 0">Failed to load: ' + (e.message || 'unknown error') + '</p>' +
            '<button onclick="caches.keys().then(function(k){k.forEach(function(n){caches.delete(n)})}).then(function(){location.reload()})" ' +
            'style="padding:10px 20px;border-radius:8px;border:none;background:#6c5ce7;color:#fff;cursor:pointer;font-size:14px">' +
            'Clear cache &amp; reload</button></div>';
        }
      });
      setTimeout(function() {
        var loading = document.getElementById('app-loading');
        if (loading) {
          loading.innerHTML = '<div style="text-align:center">' +
            '<div style="font-size:24px;font-weight:700;color:#6c5ce7;margin-bottom:8px">Veda</div>' +
            '<div style="font-size:13px;opacity:0.5;margin-bottom:16px">Taking longer than expectedâ€¦</div>' +
            '<button onclick="caches.keys().then(function(k){k.forEach(function(n){caches.delete(n)})}).then(function(){location.reload()})" ' +
            'style="padding:10px 20px;border-radius:8px;border:none;background:#6c5ce7;color:#fff;cursor:pointer;font-size:14px">' +
            'Clear cache &amp; reload</button></div>';
        }
      }, 8000);
    </script>
  </body>
</html>
